%clc
fprintf('+-----------------------------------------------------------------------------------+\n');
fprintf('|                                  Finetuned network                                |\n');
fprintf('+-----------------------------------------------------------------------------------+\n');
fprintf('|  Method           | Dim. | Oxford5k | Oxford105k | Paris6k | Paris106k | Holidays |\n');
fprintf('+-----------------------------------------------------------------------------------+\n');
fprintf('| siaMAC + R-MAC    |  512 |   77.0   |    69.2    |   83.8  |    76.4   |   82.5   |\n');
fprintf('| NetVLAD finetuned | 1024 |   69.2   |     --     |   76.5  |     --    |   86.5   |\n');
fprintf('+-----------------------------------------------------------------------------------+\n');
fprintf('| siaMAC + MAX-mask | %4d |   %.01f   |    %.01f    |   %.01f  |    %.01f   |   %.01f   |\n', ...
        final_dims(1), mAPs(1, 1, 1)*100, mAPs(2, 1, 1)*100, ...
        mAPs(3, 1, 1)*100, mAPs(4, 1, 1)*100, mAPs(5, 1, 1)*100);
fprintf('| siaMAC + MAX-mask | %4d |   %.01f   |    %.01f    |   %.01f  |    %.01f   |   %.01f   |\n', ...
        final_dims(2), mAPs(1, 1, 2)*100, mAPs(2, 1, 2)*100, ...
        mAPs(3, 1, 2)*100, mAPs(4, 1, 2)*100, mAPs(5, 1, 2)*100);
    
fprintf('+-----------------------------------------------------------------------------------+\n');
fprintf('| NetVLAD finetuned | 4096 |   71.6   |     --     |   79.7  |     --    |   87.5   |\n');
fprintf('| siaMAC + MAX-mask | %4d |   %.01f   |    %.01f    |   %.01f  |    %.01f   |   %.01f   |\n', ...
        final_dims(3), mAPs(1, 1, 3)*100, mAPs(2, 1, 3)*100, ...
        mAPs(3, 1, 3)*100, mAPs(4, 1, 3)*100, mAPs(5, 1, 3)*100);
fprintf('+-----------------------------------------------------------------------------------+\n');


if ~exist('results/', 'dir'), mkdir('results/'); end
if ~exist('results/exp6_table6/', 'dir'), mkdir('results/exp6_table6/'); end
fid=fopen('results/exp6_table6/compare_SOTA_part2.txt','w');
fprintf(fid, '+-----------------------------------------------------------------------------------+\n');
fprintf(fid, '|                                  Finetuned network                                |\n');
fprintf(fid, '+-----------------------------------------------------------------------------------+\n');
fprintf(fid, '|  Method           | Dim. | Oxford5k | Oxford105k | Paris6k | Paris106k | Holidays |\n');
fprintf(fid, '+---------------------------------------------------------------------------------- +\n');
fprintf(fid, '| siaMAC + R-MAC    |  512 |   77.0   |    69.2    |   83.8  |    76.4   |   82.5   |\n');
fprintf(fid, '| NetVLAD finetuned | 1024 |   69.2   |     --     |   76.5  |     --    |   86.5   |\n');
fprintf(fid, '+-----------------------------------------------------------------------------------+\n');
fprintf(fid, '| siaMAC + MAX-mask | %4d |   %.01f   |    %.01f    |   %.01f  |    %.01f   |   %.01f   |\n', ...
        final_dims(1), mAPs(1, 1, 1)*100, mAPs(2, 1, 1)*100, ...
        mAPs(3, 1, 1)*100, mAPs(4, 1, 1)*100, mAPs(5, 1, 1)*100);
fprintf(fid, '| siaMAC + MAX-mask | %4d |   %.01f   |    %.01f    |   %.01f  |    %.01f   |   %.01f   |\n', ...
        final_dims(2), mAPs(1, 1, 2)*100, mAPs(2, 1, 2)*100, ...
        mAPs(3, 1, 2)*100, mAPs(4, 1, 2)*100, mAPs(5, 1, 2)*100);
    
fprintf(fid, '+-----------------------------------------------------------------------------------+\n');
fprintf(fid, '| NetVLAD finetuned | 4096 |   71.6   |     --     |   79.7  |     --    |   87.5   |\n');
fprintf(fid, '| siaMAC + MAX-mask | %4d |   %.01f   |    %.01f    |   %.01f  |    %.01f   |   %.01f   |\n', ...
        final_dims(3), mAPs(1, 1, 3)*100, mAPs(2, 1, 3)*100, ...
        mAPs(3, 1, 3)*100, mAPs(4, 1, 3)*100, mAPs(5, 1, 3)*100);
fprintf(fid, '+-----------------------------------------------------------------------------------+\n');

